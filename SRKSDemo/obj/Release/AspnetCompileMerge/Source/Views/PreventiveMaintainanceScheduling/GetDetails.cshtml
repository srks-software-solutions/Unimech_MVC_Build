@model SRKSDemo.Models.PreventiveMaintainanceScheduling

@{
    ViewBag.Title = "Preventive Maintainance Scheduling ";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var data = ViewBag.item;
}
<div class="container body">
    <div class="main_container">
        <div class="right_col" role="main">
            <div class="">
                <div class="clearfix"></div>
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Preventive Maintainance Scheduling </h2>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li>
                                        <span>
                                            @Html.ActionLink("GetDetails", "PreventiveMaintainanceScheduling")
                                            @*<a role="button" href="create-shift-detail.html" class="btn btn-default " style="margin-top: 10px;"><i class="fa fa-plus-square" aria-hidden="true"></i>&nbsp;Add New</a>*@
                                        </span>
                                    </li>
                                    <li>
                                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                </ul>


                                <li>
                                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>

                            <div class="x_content">
                                @using (Html.BeginForm("GetDetails", "PreventiveMaintainanceScheduling", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                {
                                    <div class="x_content">
                                        <form class="form-horizontal form-label-left" novalidate>
                                            <div class="row row-space">
                                                <label class="col-sm-1 control-label">Plant Name</label>
                                                <div class="col-sm-3">
                                                    @Html.DropDownList("plant", null, "--Select Plant--", new { @id = "PlantID", @class = "form-control ", @name = "Plant", @required = "required", @style = "aria-expanded:false;width:89.7%", @value = "@ViewData['plant']" })
                                                </div>
                                                <label class="col-sm-1 control-label">Shop Name</label>
                                                <div class="col-sm-3">
                                                    @Html.HiddenFor(model => model.primitivemaintainancescheduling.ShopID, new { @id = "ShopID" })
                                                    @Html.DropDownList("shop", null, "--Select Department--", new { @id = "Editdeptid", @class = "form-control", @name = "dept", @required = "required", @style = "aria-expanded:false;width:89.7%", @value = "@ViewData['shop']" })
                                                </div>
                                                <label class="col-sm-1 control-label">Cell Name</label>
                                                <div class="col-sm-3">
                                                    @Html.HiddenFor(model => model.primitivemaintainancescheduling.CellID, new { @id = "CellID" })
                                                    @Html.DropDownList("cell", null, "--Select Plant--", new { @id = "cell", @class = "form-control ", @name = "cell", @required = "required", @style = "aria-expanded:false;width:89.7%", @value = "@ViewData['cell']" })
                                                </div>
                                                <table id="datatable-fixed-header" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                                                    <thead>
                                                        <tr>
                                                            <th>Machine Name</th>
                                                            <th>Month</th>
                                                            <th>Week</th>
                                                            <th>Action</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @Html.HiddenFor(model => model.primitivemaintainancescheduling.PlantID, new { @id = "PlantID" })

                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.Month, new { @id = "Month" })
                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.Week, new { @id = "Week" })
                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.MachineID, new { @id = "MachineID" })
                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.CreatedBy, new { @id = "CreatedBy" })
                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.CreatedOn, new { @id = "CreatedOn" })
                                                        @Html.HiddenFor(modelItem => Model.primitivemaintainancescheduling.IsDeleted, new { @id = "IsDeleted" })
                                                        <tr>
                                                            @foreach (var item in Model.primitivemaintainanceschedulingList)
                                                            {
                                                                <td>@Html.DisplayFor(modelItem => Model.primitivemaintainancescheduling.MachineName)</td>

                                                            }
                                                        </tr>
                                                        <div class="row row-space">
                                                            <label class="col-sm-1 control-label">Month</label>
                                                            <div class="col-sm-3">
                                                                @Html.DropDownList("Month", null, "--Select Month--", new { @id = "Month", @class = "form-control", @name = "Month", @required = "required", @value = "@ViewData['Month']" })
                                                            </div>
                                                            <label class="col-sm-1 control-label">Week</label>
                                                            <div class="col-sm-3">
                                                                @Html.DropDownList("Week", null, "--Select Week--", new { @id = "Week", @class = "form-control", @name = "Week", @required = "required", @value = "@ViewData['Week']" })
                                                            </div>
                                                        </div>
                                                        <span class="input-group-btn">
                                                            <button class="btn btn-success btn-round btn-add" type="button">
                                                                <span class="glyphicon glyphicon-plus"></span>
                                                            </button>
                                                        </span>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <div class="generate-btn">
                                                <a id="" href="/PreventiveMaintainanceScheduling/Index" type="submit" class="btn btn-new"><i class="fa fa-chevron-left" aria-hidden="true"></i>&nbsp;Back</a>
                                                <button type="submit" class="btn btn-new float-right"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp;Update</button>
                                            </div>
                                        </form>
                                    </div>

                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>sss
<script src="~/js/jquery-2.1.4.min.js"></script>
<script src="~/vendors/jquery/dist/jquery.min.js"></script>
<script>

    $("#Month").on("click", function (e) {
        var SID = $(this).val();
        $.getJSON("/PreventiveMaintainanceScheduling/FetchMonth", { SID: SID }, function (data) {
            $("#Month").empty();
            $("#Month").append("<option value=''> --Select Month-- </option>")
            $.each(data, function (index, item) {
                $("#Month").append("<option value = '" + item.Value + "'>" + item.Text + "</option>")
            });
        });
    });

    $("#Week").on("click", function (e) {
        var WID = $(this).val();
        $.getJSON("/PreventiveMaintainanceScheduling/FetchWeek", { WID: WID }, function (data) {
            $("#Week").empty();
            $("#Week").append("<option value=''> --Select Week-- </option>")
            $.each(data, function (index, item) {
                $("#Week").append("<option value = '" + item.Value + "'>" + item.Text + "</option>")
            });
        });
    });
</script>

<script>
    $(".Machine").on("click", function (e) {
        $(".Machine").click();

        e.preventDefault();
        var MachineID = $(this).attr("id")
        //alert(CellCategoryID)
        $.getJSON("/PreventiveMaintainanceScheduling/GetMachineNameById", { Id: MachineID }, function (data) {
            $.each(data, function (index, item) {
                $("#Machine").val((item.machinename));
            });
        });
    });
</script>


<script type="text/javascript">
    $(function () {
        $(document).on('click', '.btn-add', function (e) {
            alert(0)
            e.preventDefault();

            var controlForm = $('.controls .form'),
                currentEntry = $(this).parents('.entry:first'),
                newEntry = $(currentEntry.clone()).insertAfter(currentEntry);

            newEntry.find('input').val('');
            controlForm.find('.entry:not(:last) .btn-add')
                .removeClass('btn-add').addClass('btn-remove')
                .removeClass('btn-success').addClass('btn-danger')
                .html('<span class="glyphicon glyphicon-minus"></span>');
        }).on('click', '.btn-remove', function (e) {
            $(this).parents('.entry:first').remove();

            e.preventDefault();
            return false;
        });
    });
</script>
